<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>画板</title>
    <link rel="stylesheet" href="./2.css">
</head>
<body>
    <canvas id="canvas"></canvas>
    <div id="tools" class="tools">
        <button id="eraser">橡皮擦</button>
        <button id="pen">画笔</button>
    </div>
    <script>


        var mm = document.getElementById('canvas')
        page ()
        window.onresize = function(){
            page()
        }
        var context = mm.getContext('2d')
        var flag = false
        var lastpoint = {x:undefined,y:undefined}

        var useEraser = false
        eraser.onclick = function(){
            useEraser = true
            tools.className = 'tools-x'
        }
        pen.onclick = function(){
            useEraser = false
            tools.className = 'tools'
        }
        



        //按下鼠标
        mm.onmousedown = function(a){
            var x = a.clientX
            var y = a.clientY
            flag = true
            if(useEraser){
                context.clearRect(x-10,y-10,20,20)
            }
            else{
                lastpoint = {'x':x,'y':y}
            }
         }





        //移动鼠标
        mm.onmousemove = function(b){
            var x = b.clientX
            var y = b.clientY
            if(flag){
                if(useEraser){
                    context.clearRect(x-10,y-10,20,20)
                }
                else{
                    var newpoint = {'x':x,'y':y}
                    line(lastpoint.x,lastpoint.y,newpoint.x,newpoint.y)
                    lastpoint = newpoint
                }
            }
        }




        //离开鼠标
        mm.onmouseup = function(c){
            flag = false
        }
        //函数
        function page() {
            var pageheight = document.documentElement.clientHeight
            var pagewidth = document.documentElement.clientWidth
            mm.height = pageheight
            mm.width = pagewidth    
        }
        function line(x1,y1,x2,y2) {
            context.beginPath()
            context.strokeStyle = 'black'
            context.moveTo(x1,y1)
            context.lineWidth = 3
            context.lineTo(x2,y2)
            context.stroke()
            context.closePath()
        }



</script>
</body>
</html>